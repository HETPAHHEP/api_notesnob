# API NoteSnob ![NoteSnob Workflow](https://github.com/HETPAHHEP/api_notesnob/actions/workflows/notesnob_workflow.yml/badge.svg)

### –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç NoteSnob –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –±–∞–∑—É –æ—Ç–∑—ã–≤–æ–≤ –æ —Ñ–∏–ª—å–º–∞—Ö, –∫–Ω–∏–≥–∞—Ö –∏ –º—É–∑—ã–∫–µ.

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø–∏—Å–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Ä–µ—Ü–µ–Ω–∑–∏—é –∏ —Å—Ç–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—é –ø–æ 10-–±–∞–ª–ª—å–Ω–æ–π —à–∫–∞–ª–µ.
–ò–∑ –æ—Ü–µ–Ω–æ–∫ –æ–±–∑–æ—Ä–æ–≤ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Å—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è. 
–î—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –æ—Å—Ç–∞–≤–ª—è—Ç—å —Å–≤–æ–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ —Ä–µ—Ü–µ–Ω–∑–∏–∏.

### üîç –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

* –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ (username, email), –ø–æ—Å–ª–µ —á–µ–≥–æ –ø–æ–ª—É—á–∞–µ—Ç –Ω–∞ –ø–æ—á—Ç—É
–∫–æ–¥. 
* –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è JWT —Ç–æ–∫–µ–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å username –∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∫–æ–¥ —Å –ø–æ—á—Ç—ã.
* –î–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **_—Ç–æ–ª—å–∫–æ Access —Ç–æ–∫–µ–Ω_**. –ï—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω —Å–Ω–æ–≤–∞, 
—Ç–æ –¥–ª—è —ç—Ç–æ–≥–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤—ã–π –∫–æ–¥ –Ω–∞ –ø–æ—á—Ç—É.


### üë®‚Äçüíª –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

[![Python][Python-badge]][Python-url]
[![Django REST][DRF-badge]][DRF-url]
[![PostgreSQL][Postgres-badge]][Postgres-url]
[![Nginx][Nginx-badge]][Nginx-url]
[![Docker][Docker-badge]][Docker-url]
[![Yandex-Cloud][Yandex-Cloud-badge]][Yandex-Cloud-url]
[![Github-Actions][Github-Actions-badge]][Github-Actions-url]

## ‚öô –ù–∞—á–∞–ª–æ –†–∞–±–æ—Ç—ã

–ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–ø–∏—é –ø—Ä–æ–µ–∫—Ç–∞, —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –Ω–∏–∂–µ.


### üöÄ –ó–∞–ø—É—Å–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

1. **–û–±–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç—ã**
   
   ```bash
   sudo apt-get update
   sudo apt-get upgrade
   ```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ docker compose**
   
   ```bash
   sudo apt-get install docker.io
   sudo apt-get install docker-compose
   ```

3. **–ü–µ—Ä–µ–Ω–µ—Å–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã**
   
   ```bash
   scp docker-compose.yml <username>@<host>:/home/<username>/
   scp nginx.conf <username>@<host>:/home/<username>/
   scp -r docs/ <username>@<host>:/home/<username>/docs/
   ```

4. **–°–æ–∑–¥–∞–π—Ç–µ *dotenv-—Ñ–∞–π–ª***

   ```bash
   touch .env
   ```

   ```dotenv
   EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
   EMAIL_HOST=your.email.host
   EMAIL_PORT=555
   EMAIL=your@email.com
   EMAIL_PASSWORD=your-sending-email-password
   DJANGO_SECRET_KEY=your-django-secret
   DB_ENGINE=django.db.backends.postgresql
   DB_NAME=postgres
   POSTGRES_USER=postgres
   POSTGRES_PASSWORD=password_here
   DB_HOST=host_here
   DB_PORT=5432
   ALLOWED_HOSTS=localhost;127.0.0.1;backend;yourhost
   ```
   ###### *–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ JWT*

    ```bash
    openssl rand -hex 32
    ```
   
   ###### *–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á Django –º–æ–∂–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å [—Ç—É—Ç](https://djecrety.ir/)*

5. **–î–æ–±–∞–≤—å—Ç–µ –∞–¥—Ä–µ—Å –≤ –∫–æ–Ω—Ñ–∏–≥ nginx**

   ```nginx
   server {
    listen 80;
    server_tokens off;
    server_name yourhost;
   ```

6. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**

   ```bash
   sudo docker-compose up
   ```  

7. **–ó–∞–≤–µ—Ä—à–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É Django**

   _–ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ Django, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∏—Ö 
   –≤ –Ω—É–∂–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:_
   
   ```bash
   docker exec -it admin_web_1 bash  # –∏–º—è –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞
   ```

   _–í—ã –º–æ–∂–µ—Ç–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –∏–ª–∏ —Å –ø–æ–º–æ—â—å—é **_entrypoint.sh_** —Å–¥–µ–ª–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
   –∏ —Å–æ–±—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏–∫—É –ø—Ä–æ–µ–∫—Ç–∞:_


   - –ó–∞–ø—É—Å—Ç–∏–≤ —Å–∫—Ä–∏–ø—Ç
      ```bash
      cat infra/entrypoint.sh | sudo docker exec -i \
      admin_web_1 sh -c 'cat > entry.sh && chmod +x entry.sh && ./entry.sh'
      ```
   - –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ _web_
      ```bash
      python manage.py migrate --no-input
      ```
   
      ```bash
      python manage.py collectstatic --no-input --clear
      ```


---

### üí™ –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–ß—Ç–æ–±—ã —É–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∑–∞ —Ä–∞–±–æ—Ç–æ–π –ø—Ä–æ–µ–∫—Ç–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
—Å–æ–∑–¥–∞—Ç—å —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –û–Ω –±—É–¥–µ—Ç –∏–º–µ—Ç—å –ø—Ä–∞–≤–∞ —Ä–æ–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏ –¥–æ—Å—Ç—É–ø –∫ –ø–∞–Ω–µ–ª–∏ Django. 

```bash
python manage.py createsuperuser
```

### üìá –î–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–î–ª—è —É–¥–æ–±–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–∞–Ω–Ω—ã–µ –≤ CSV. –ß—Ç–æ–±—ã –∏—Ö –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö,
–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ _web_:

```bash
python manage.py start_import
```

### üóë –û—Ç—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç—á–∏—Å—Ç–∏—Ç—å –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏,
—Ç–æ –¥–ª—è —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–º–∞–Ω–¥–æ–π:

```bash
sudo docker-compose down -v --rmi
```

### üìñ API (Docs: [OpenAPI](notesnob_api/static/redoc_notesnob.yaml))

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ —Å—Å—ã–ª–∫–µ: http://localhost/redoc

   ###### **–õ–æ–∫–∞–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç*


---

<h5 align="center">
–ê–≤—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞: <a href="https://github.com/HETPAHHEP">HETPAHHEP</a>
</h5>

<!-- MARKDOWN BADGES & URLs -->
[Python-badge]: https://img.shields.io/badge/Python-4db8ff?style=for-the-badge&logo=python&logoColor=%23ffeb3b

[Python-url]: https://www.python.org/

[Gunicorn-badge]: https://img.shields.io/badge/gunicorn-%298729.svg?style=for-the-badge&logo=gunicorn&logoColor=white

[Gunicorn-url]: https://gunicorn.org/

[Postgres-badge]: https://img.shields.io/badge/postgres-%23316192.svg?style=for-the-badge&logo=postgresql&logoColor=white

[Postgres-url]: https://www.postgresql.org/

[Docker-badge]: https://img.shields.io/badge/docker-%230db7ed.svg?style=for-the-badge&logo=docker&logoColor=white

[Docker-url]: https://www.docker.com/

[Nginx-badge]: https://img.shields.io/badge/nginx-%23009639.svg?style=for-the-badge&logo=nginx&logoColor=white

[Nginx-url]: https://nginx.org

[DRF-badge]: https://img.shields.io/badge/Django_REST-f44336?style=for-the-badge&logo=django

[DRF-url]: https://www.django-rest-framework.org

[Yandex-Cloud-badge]: https://img.shields.io/badge/Yandex_Cloud-white?style=for-the-badge

[Yandex-Cloud-url]: https://cloud.yandex.ru

[Github-Actions-badge]: https://img.shields.io/badge/Github_Actions-%239c27b0?style=for-the-badge&logo=github%20actions&logoColor=white

[Github-Actions-url]: https://github.com/features/actions